{% extends 'core/base.html' %}

{% block title %}My Profile{% endblock %}

{% block content %}
    <div class="mb-4">
        <h2 class="mb-0">
            <i class="fas fa-user-circle"></i> My Profile
        </h2>
    </div>
    
    <!-- Profile Header -->
    <div class="card mb-4">
        <div class="card-body">
            <div class="row align-items-center">
                <div class="col-md-3 text-center mb-3 mb-md-0">
                    {% if profile.profile_photo %}
                        <img src="{{ profile.profile_photo.url }}" alt="Profile Photo" class="profile-photo mb-3">
                    {% else %}
                        <div class="profile-photo mb-3 d-flex align-items-center justify-content-center" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-user fa-5x text-white"></i>
                        </div>
                    {% endif %}
                </div>
                
                <div class="col-md-9">
                    <h3>{{ user.first_name }} {% if profile.middle_name %}{{ profile.middle_name }} {% endif %}{{ user.last_name }}</h3>
                    <p class="text-muted mb-2">
                        <i class="fas fa-envelope"></i> {{ user.email }}
                    </p>
                    {% if profile.phone %}
                    <p class="text-muted mb-2">
                        <i class="fas fa-phone"></i> {{ profile.phone }}
                    </p>
                    {% endif %}
                    {% if profile.college_name %}
                    <p class="text-muted mb-0">
                        <i class="fas fa-school"></i> {{ profile.college_name }}{% if profile.degree %} â€¢ {{ profile.degree }}{% endif %}
                    </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Profile Form -->
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <!-- Personal Information -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-id-card"></i> Personal Information</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-control" value="{{ user.first_name }}" disabled>
                        <small class="text-muted">Change via account settings</small>
                    </div>
                    
                    <div class="col-md-4 mb-3">
                        <label for="{{ form.middle_name.id_for_label }}" class="form-label">Middle Name</label>
                        {{ form.middle_name }}
                    </div>
                    
                    <div class="col-md-4 mb-3">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-control" value="{{ user.last_name }}" disabled>
                        <small class="text-muted">Change via account settings</small>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.phone.id_for_label }}" class="form-label">
                            <i class="fas fa-phone"></i> Phone Number
                        </label>
                        {{ form.phone }}
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.gender.id_for_label }}" class="form-label">Gender</label>
                        {{ form.gender }}
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.date_of_birth.id_for_label }}" class="form-label">Date of Birth</label>
                        {{ form.date_of_birth }}
                    </div>
                </div>
            </div>
        </div>
                
                <div class="mb-3">
                    <label for="{{ form.address.id_for_label }}" class="form-label">
                        <i class="fas fa-map-marker-alt"></i> Address
                    </label>
                    {{ form.address }}
                </div>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.city.id_for_label }}" class="form-label">City</label>
                        {{ form.city }}
                    </div>
                    
                    <div class="col-md-3 mb-3">
                        <label for="{{ form.state.id_for_label }}" class="form-label">State</label>
                        {{ form.state }}
                    </div>
                    
                    <div class="col-md-3 mb-3">
                        <label for="{{ form.pincode.id_for_label }}" class="form-label">Pincode</label>
                        {{ form.pincode }}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Education Information -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-graduation-cap"></i> Education Information</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.college_name.id_for_label }}" class="form-label">
                            <i class="fas fa-school"></i> College Name
                        </label>
                        {{ form.college_name }}
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.degree.id_for_label }}" class="form-label">
                            <i class="fas fa-bookmark"></i> Degree
                        </label>
                        {{ form.degree }}
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.specialization.id_for_label }}" class="form-label">Specialization</label>
                        {{ form.specialization }}
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.cgpa.id_for_label }}" class="form-label">CGPA / Percentage</label>
                        {{ form.cgpa }}
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="{{ form.year_of_study.id_for_label }}" class="form-label">
                            <i class="fas fa-layer-group"></i> Year of Study
                        </label>
                        {{ form.year_of_study }}
                    </div>
                    
                    <div class="col-md-4 mb-3">
                        <label for="{{ form.admission_year.id_for_label }}" class="form-label">
                            <i class="fas fa-calendar"></i> Admission Year
                        </label>
                        {{ form.admission_year }}
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.backlogs.id_for_label }}" class="form-label">
                            <i class="fas fa-exclamation-circle"></i> Total Backlogs
                        </label>
                        {{ form.backlogs }}
                        <small class="form-text text-muted d-block mt-1">Total number of backlog subjects</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.current_backlogs.id_for_label }}" class="form-label">
                            <i class="fas fa-clock"></i> Current Backlogs
                        </label>
                        {{ form.current_backlogs }}
                        <small class="form-text text-muted d-block mt-1">Current pending backlog subjects</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Certifications & Links -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-certificate"></i> Certifications & Learning Platforms</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="{{ form.certifications_links.id_for_label }}" class="form-label">
                        <i class="fas fa-link"></i> Certification Links
                    </label>
                    {{ form.certifications_links }}
                    <small class="form-text text-muted d-block mt-1">Paste certification/credential links, one per line</small>
                </div>
                
                <div class="mb-3">
                    <label for="{{ form.github_username.id_for_label }}" class="form-label">
                        <i class="fab fa-github"></i> GitHub Username
                    </label>
                    {{ form.github_username }}
                </div>
                
                <div class="mb-3">
                    <label for="{{ form.linkedin_username.id_for_label }}" class="form-label">
                        <i class="fab fa-linkedin"></i> LinkedIn Username
                    </label>
                    {{ form.linkedin_username }}
                </div>
                
                <div class="mb-3">
                    <label for="{{ form.hackerrank_username.id_for_label }}" class="form-label">
                        <i class="fas fa-code"></i> HackerRank Username
                    </label>
                    {{ form.hackerrank_username }}
                </div>
                
                <div class="mb-3">
                    <label for="{{ form.other_platforms.id_for_label }}" class="form-label">
                        <i class="fas fa-globe"></i> Other Platforms
                    </label>
                    {{ form.other_platforms }}
                    <small class="form-text text-muted d-block mt-1">Other platform usernames (e.g., Codeforces: myusername)</small>
                </div>
            </div>
        </div>
        
        <!-- Professional Information -->
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0"><i class="fas fa-briefcase"></i> Professional Information</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="{{ form.skills.id_for_label }}" class="form-label">
                        <i class="fas fa-code"></i> Skills
                    </label>
                    {{ form.skills }}
                    <small class="form-text text-muted d-block mt-1">Separate skills with commas (e.g., Python, Django, JavaScript)</small>
                </div>
                
                <div class="mb-3">
                    <label for="{{ form.experience.id_for_label }}" class="form-label">
                        <i class="fas fa-briefcase"></i> Work Experience
                    </label>
                    {{ form.experience }}
                    <small class="form-text text-muted d-block mt-1">Describe your professional experience</small>
                </div>
                
                <div class="mb-3">
                    <label for="{{ form.bio.id_for_label }}" class="form-label">
                        <i class="fas fa-book"></i> Bio / About Me
                    </label>
                    {{ form.bio }}
                    <small class="form-text text-muted d-block mt-1">Tell us about yourself, your interests, and career goals</small>
                </div>
            </div>
        </div>
        
        <!-- Document Uploads -->
        <div class="card mb-4">
            <div class="card-header bg-warning text-white">
                <h5 class="mb-0"><i class="fas fa-file-upload"></i> Documents</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.profile_photo.id_for_label }}" class="form-label">
                            <i class="fas fa-camera"></i> Profile Photo
                        </label>
                        {{ form.profile_photo }}
                        <small class="form-text text-muted d-block mt-1">Upload a professional photo (JPG, PNG)</small>
                        {% if profile.profile_photo %}
                            <div class="mt-2">
                                <small>Current: <a href="{{ profile.profile_photo.url }}" target="_blank">View Photo</a></small>
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.resume.id_for_label }}" class="form-label">
                            <i class="fas fa-file-pdf"></i> Resume / CV
                        </label>
                        {{ form.resume }}
                        <small class="form-text text-muted d-block mt-1">Upload your resume (PDF recommended)</small>
                        {% if profile.resume %}
                            <div class="mt-2">
                                <small>Current: <a href="{{ profile.resume.url }}" target="_blank">Download Resume</a></small>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="d-flex gap-2 mb-4">
            <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-save"></i> Save Profile
            </button>
            <a href="{% url 'dashboard' %}" class="btn btn-secondary btn-lg">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
    
    <style>
        .profile-photo {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
{% endblock %}
